{% extends "crm/base.html" %}
{% block title %}Dashboard - CRM{% endblock %}

{% block content %}
<!-- Header -->
<div class="mb-8">
    <h1 class="text-2xl font-semibold text-gray-900 mb-2">Hello {{ user.get_full_name|default:user.username }} ðŸ‘‹</h1>
    <p class="text-gray-600">Here's what's happening with your CRM today</p>
</div>

<!-- Stats Cards -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div class="bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow">
        <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 rounded-lg bg-blue-50 flex items-center justify-center">
                <span class="text-2xl">ðŸ‘¤</span>
            </div>
        </div>
        <div class="text-3xl font-bold text-gray-900 mb-1">{{ contacts_count }}</div>
        <div class="text-sm text-gray-600 mb-1">Total Contacts</div>
        <div class="text-xs text-green-600 font-medium">Active</div>
    </div>
    
    <div class="bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow">
        <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 rounded-lg bg-green-50 flex items-center justify-center">
                <span class="text-2xl">ðŸ’¼</span>
            </div>
        </div>
        <div class="text-3xl font-bold text-gray-900 mb-1">{{ deals_count }}</div>
        <div class="text-sm text-gray-600 mb-1">Total Deals</div>
        <div class="text-xs text-green-600 font-medium">In Pipeline</div>
    </div>
    
    <div class="bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow">
        <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 rounded-lg bg-purple-50 flex items-center justify-center">
                <span class="text-2xl">ðŸ’¬</span>
            </div>
        </div>
        <div class="text-3xl font-bold text-gray-900 mb-1">{{ interactions_count }}</div>
        <div class="text-sm text-gray-600 mb-1">Total Interactions</div>
        <div class="text-xs text-green-600 font-medium">This Month</div>
    </div>
</div>

<!-- Quick Actions -->
<div class="mb-8">
    <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-semibold text-gray-900">Quick Actions</h2>
    </div>
    <div class="flex flex-wrap gap-3">
        <a href="{% url 'crm:contact_create' %}" class="inline-flex items-center px-5 py-2.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors shadow-sm">
            <span class="mr-2">+</span>
            New Contact
        </a>
        <a href="{% url 'crm:deal_create' %}" class="inline-flex items-center px-5 py-2.5 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors shadow-sm">
            <span class="mr-2">+</span>
            New Deal
        </a>
        <a href="{% url 'crm:interaction_create' %}" class="inline-flex items-center px-5 py-2.5 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors shadow-sm">
            <span class="mr-2">+</span>
            New Interaction
        </a>
    </div>
</div>

<!-- Recent Items -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <!-- Recent Contacts -->
    <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
        <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
            <div class="flex items-center justify-between">
                <h3 class="text-base font-semibold text-gray-900">Recent Contacts</h3>
                <a href="{% url 'crm:contact_list' %}" class="text-sm text-blue-600 hover:text-blue-700 font-medium">View all</a>
            </div>
        </div>
        <div class="p-6">
            {% if recent_contacts %}
                <ul class="space-y-4">
                    {% for contact in recent_contacts %}
                    <li class="flex items-center justify-between group">
                        <div class="flex-1 min-w-0">
                            <div class="text-sm font-medium text-gray-900 truncate">{{ contact.contact_name }}</div>
                            <div class="text-xs text-gray-500 mt-1 truncate">{{ contact.company }}</div>
                        </div>
                        <a href="{% url 'crm:contact_update' contact.id %}" class="ml-4 text-xs text-blue-600 hover:text-blue-700 font-medium">Edit</a>
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <div class="text-center py-8">
                    <p class="text-sm text-gray-400 mb-4">No contacts yet</p>
                    <a href="{% url 'crm:contact_create' %}" class="text-sm text-blue-600 hover:text-blue-700 font-medium">Create your first contact</a>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Recent Deals -->
    <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
        <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
            <div class="flex items-center justify-between">
                <h3 class="text-base font-semibold text-gray-900">Recent Deals</h3>
                <a href="{% url 'crm:deal_list' %}" class="text-sm text-blue-600 hover:text-blue-700 font-medium">View all</a>
            </div>
        </div>
        <div class="p-6">
            {% if recent_deals %}
                <ul class="space-y-4">
                    {% for deal in recent_deals %}
                    <li class="flex items-center justify-between group">
                        <div class="flex-1 min-w-0">
                            <div class="text-sm font-medium text-gray-900 truncate">{{ deal.contact.company }}</div>
                            <div class="text-xs text-gray-500 mt-1 truncate">{{ deal.deal_stage }}</div>
                        </div>
                        <a href="{% url 'crm:deal_update' deal.id %}" class="ml-4 text-xs text-blue-600 hover:text-blue-700 font-medium">Edit</a>
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <div class="text-center py-8">
                    <p class="text-sm text-gray-400 mb-4">No deals yet</p>
                    <a href="{% url 'crm:deal_create' %}" class="text-sm text-blue-600 hover:text-blue-700 font-medium">Create your first deal</a>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Recent Interactions -->
    <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
        <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
            <div class="flex items-center justify-between">
                <h3 class="text-base font-semibold text-gray-900">Recent Interactions</h3>
                <a href="{% url 'crm:interaction_list' %}" class="text-sm text-blue-600 hover:text-blue-700 font-medium">View all</a>
            </div>
        </div>
        <div class="p-6">
            {% if recent_interactions %}
                <ul class="space-y-4">
                    {% for interaction in recent_interactions %}
                    <li class="flex items-center justify-between group">
                        <div class="flex-1 min-w-0">
                            <div class="text-sm font-medium text-gray-900 truncate">{{ interaction.contact.contact_name }}</div>
                            <div class="text-xs text-gray-500 mt-1 truncate">{{ interaction.interaction_type }}</div>
                        </div>
                        <a href="{% url 'crm:interaction_update' interaction.id %}" class="ml-4 text-xs text-blue-600 hover:text-blue-700 font-medium">Edit</a>
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <div class="text-center py-8">
                    <p class="text-sm text-gray-400 mb-4">No interactions yet</p>
                    <a href="{% url 'crm:interaction_create' %}" class="text-sm text-blue-600 hover:text-blue-700 font-medium">Create your first interaction</a>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
