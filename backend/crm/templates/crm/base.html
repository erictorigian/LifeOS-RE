<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}CRM - LifeOS{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/output.css' %}" />
    <script>
        // Toggle sidebar on mobile
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('-translate-x-full');
        }
    </script>
    {% block extra_css %}{% endblock %}
</head>

<body class="bg-slate-900 text-gray-100">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar - Dark, Thin -->
        <aside id="sidebar" class="w-64 bg-slate-800 border-r border-slate-700 flex flex-col fixed md:relative inset-y-0 left-0 z-50 transition-transform duration-300 md:translate-x-0">
            <!-- Logo + User -->
            <div class="p-4 border-b border-slate-700">
                <div class="text-lg font-semibold text-white mb-3">LifeOS</div>
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 rounded-full bg-amber-500/20 border border-amber-500/30 flex items-center justify-center">
                        <span class="text-xs font-medium text-amber-400">{{ user.username|first|upper }}</span>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="text-sm font-medium text-white truncate">{{ user.get_full_name|default:user.username }}</div>
                    </div>
                </div>
            </div>
            
            <!-- Navigation -->
            <nav class="flex-1 p-3 space-y-1 overflow-y-auto">
                <a href="{% url 'crm:dashboard' %}" class="flex items-center px-3 py-2 rounded-lg {% if request.resolver_match.url_name == 'dashboard' %}bg-slate-700 text-amber-400{% else %}text-gray-300 hover:bg-slate-700 hover:text-white{% endif %} transition-colors">
                    <span class="mr-3 text-lg">ðŸ“Š</span>
                    <span class="text-sm font-medium">Dashboard</span>
                </a>
                <a href="{% url 'crm:contact_list' %}" class="flex items-center px-3 py-2 rounded-lg {% if 'contact' in request.resolver_match.url_name %}bg-slate-700 text-amber-400{% else %}text-gray-300 hover:bg-slate-700 hover:text-white{% endif %} transition-colors">
                    <span class="mr-3 text-lg">ðŸ‘¥</span>
                    <span class="text-sm font-medium">Contacts</span>
                </a>
                <a href="{% url 'crm:deal_list' %}" class="flex items-center px-3 py-2 rounded-lg {% if 'deal' in request.resolver_match.url_name %}bg-slate-700 text-amber-400{% else %}text-gray-300 hover:bg-slate-700 hover:text-white{% endif %} transition-colors">
                    <span class="mr-3 text-lg">ðŸ’¼</span>
                    <span class="text-sm font-medium">Deals</span>
                </a>
                <a href="{% url 'crm:interaction_list' %}" class="flex items-center px-3 py-2 rounded-lg {% if 'interaction' in request.resolver_match.url_name %}bg-slate-700 text-amber-400{% else %}text-gray-300 hover:bg-slate-700 hover:text-white{% endif %} transition-colors">
                    <span class="mr-3 text-lg">ðŸ’¬</span>
                    <span class="text-sm font-medium">Interactions</span>
                </a>
            </nav>
            
            <!-- Logout -->
            <div class="p-3 border-t border-slate-700">
                <a href="{% url 'accounts:logout' %}" class="flex items-center px-3 py-2 rounded-lg text-gray-300 hover:bg-slate-700 hover:text-white transition-colors">
                    <span class="mr-3 text-lg">ðŸšª</span>
                    <span class="text-sm font-medium">Logout</span>
                </a>
            </div>
        </aside>
        
        <!-- Mobile Sidebar Overlay -->
        <div id="sidebar-overlay" class="fixed inset-0 bg-black/50 z-40 md:hidden hidden" onclick="toggleSidebar()"></div>
        
        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto bg-slate-900">
            <div class="p-6 md:p-8">
                {% block content %}{% endblock %}
            </div>
        </main>
    </div>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
